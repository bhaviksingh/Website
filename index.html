<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>bvk</title>
    <link rel="shortcut icon" href="favicon.png" type="image/png" sizes="24x24" />
    <link rel="stylesheet" type="text/css" href="style.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400;0,500;1,400;1,500&display=swap"
      rel="stylesheet"
    />

    <script src="jslib/poisson.js"></script>
    <script src="jslib/fabric.min.js"></script>
    <script src="jslib/utils.js"></script>
    <script src="jslib/moment.js"></script>
    <script src="jslib/moment-timezone-with-data.js"></script>
    <script>

    </script>
  </head>

  <body>
    <div id="header" class="half">
      <p>Hi there it's Bhavik, welcome to my website âš˜</p>
      <p>
        It's Thu, Mar 3 today -- Spring will be coming soon. A pair of shoes window a pair of shoes are hanging off a telephone
        wire. I just spent a few minutes working on this website today, and will go back to napping shortly.
      <p>
        Lately I've been creating software that is slow, intimate and powered by communities (can using software feel like an
        evening breeze?). Relatedly, I tend to read about nature, cooperatives, decentralized networks, graphics and spaces in between.
      </p>
      <p>
        I love to collaborate with other artists, technologists, activists, humans and plants. If that sounds interesting,
        email me at <a href="mailto:bhaviksingh@gmail.com" target="_blank">bhaviksingh@gmail.com</a>.
      </p>
    </div>
    
      <div id="tools-container">
        <div id="play">
          <div class="slider-container">
            <div id="layout-refresh" style="display: none">
              <span id="refresh" style="text-decoration: underline; cursor: pointer" onclick="refreshPage()">
                re-arrange works
              </div>
            </span>
            <div>
              <label> foreground color</label>
              <input
                id="FGColor-range"
                type="range"
                min="1"
                max="360"
                value="251"
                oninput="updateColorHue('FGColor', this.value)"
              />
            </div>
            <div>
              <label> background color </label>
              <input
                id="BGColor-range"
                type="range"
                min="1"
                max="360"
                value="55"
                oninput="updateColorHue('BGColor', this.value)"
              />
            </div>
            <div style="display: none">
              <label> Outline color </label>
              <input
                style="width: 15ch"
                id="BrushColor-range"
                type="range"
                min="1"
                max="360"
                value="55"
                oninput="updateColorHue('BrushColor', this.value)"
              />
            </div>
          </div>
        </div>
      </div>
      <div id="container">
        <div id="content-holder">
          <!-- Jose Miguel -->
          <div class="content paper not-google" data-priority="1.3">
            <div class="content-caption">
              <div class="title">
                <a href="https://josemiguel.virtualcarelab.com/" target="_blank">Portal with JosÃ© Miguel</a> (2020)
              </div>
              <div>with JosÃ© Miguel Galan & <a href="https://virtualcarelab.com/" target="_blank">Virtual Care Lab</a></div>
            </div>
            <div class="content-main">
              <video width="1080" height="1079" muted loop poster="/Images/home/josemiguel-portal-static.png" loop>
                <source src="/Images/home/josemiguel-portal-phone.mp4" type="video/mp4" />
              </video>
            </div>
          </div>

            <!-- Lsystem club -->
            <div class="content paper not-google" data-priority="0.9">
              <div class="content-caption">
                <div class="title">
                  <a href="https://josemiguel.virtualcarelab.com/" target="_blank">lsystem.club</a> (2021)
                </div>
              </div>
              <div class="content-main">
                <img src="/Images/Home/lsystem-lilac.gif" alt="An image of the lsystem club editor"/>
              </div>
            </div>

            <div class="content paper not-google" data-priority="1.2">
              <div class="content-caption">
                <div class="title">
                  <a href="https://www.artnews.com/art-in-america/features/nfts-curation-online-exhibitions-crypto-art-1234601534/" target="_blank">generative plants (art in america)</a> (2021)
                </div>
              </div>
              <div class="content-main">
                <img src="/Images/Home/artinamerica.jpeg" alt="Screenshot of the gallery show featuring my generative plants"/>
              </div>
            </div>

          <!-- Breathe -->
          <div class="content paper not-google" data-priority="1.3">
            <div class="content-caption">
              <div class="title"><a href="/breathe" target="_blank">Breathe</a> (2019/20)</div>
            </div>
            <div class="content-main">
              <video width="1920" height="1080" muted loop poster="/Images/home/breathe-phone-static.png" loop>
                <source src="/Images/home/breathe-phone.mov" type="video/mp4" />
              </video>
            </div>
          </div>

          <!-- Shared Space -->
          <div class="content paper not-google" data-priority="1">
            <div class="content-caption">
              <div class="title"><a href="https://www.sharedspace.page" target="_blank">sharedspace</a> (2020)</div>
            </div>
            <div class="content-main">
              <video width="720" height="720" muted loop poster="/Images/home/sharedspace-grassroom-static.png" loop>
                <source src="/Images/home/sharedspace-grassroom.mp4" type="video/mp4" />
              </video>
            </div>
          </div>
          <div class="content paper not-google" data-priority="1.3">
            <div class="content-caption">
              <div class="title"><a href="https://www.sharedspace.page" target="_blank">sharedspace</a> (2020)</div>
            </div>
            <div class="content-main">
              <video width="720" height="406" muted loop poster="/Images/home/sharedspace-sunroom-static.png" loop>
                <source src="/Images/home/sharedspace-sunroom.mp4" type="video/mp4" />
              </video>
            </div>
          </div>
          <!-- Dinner at Ians -->
          <div class="content paper" data-priority="1">
            <div class="content-caption">
              <div class="title">
                <a href="http://www.dinneratians.com" target="_blank">Dinner at Ian's</a> (2019/20)
              </div>
            </div>
            <div class="content-main"><img draggable="false" src="/Images/home/dinner-at-ians.jpg" /></div>
          </div>
          <!-- FLowers -->
          <div class="content paper" data-priority="1.5">
            <div class="content-caption">
              <div class="title">
                <a href="http://bvk-flowers.glitch.me/" target="_blank"> flower sketches </a> (2020)
              </div>
            </div>
            <div class="content-main" style="background: white">
              <img draggable="false" src="/Images/home/flower-sketches.png" />
            </div>
          </div>
          <!-- Emoji kitchen -->
          <div class="content browser" data-priority="1.2">
            <div class="content-caption">
              <div class="title"><a href="http://emoji.kitchen" target="_blank"> Emoji Kitchen</a> (2019)</div>
            </div>
            <div class="content-main">
              <video width="644" height="680" autoplay loop muted poster="/Images/home/emoji-kitchen-static.png" loop>
                <source src="/Images/home/emoji-kitchen.mov" type="video/mp4" />
              </video>
            </div>
          </div>
          <!-- Smishy -->
          <div class="content browser" data-priority="1.5">
            <div class="content-caption">
              <div class="title"><a href="/smishy" target="_blank"> Smishy </a> (2019)</div>
            </div>
            <div class="content-main">
              <video width="1104" height="704" muted loop poster="/Images/home/smishy-explainer-static.png" loop>
                <source src="/Images/home/smishy-explainer-small.mov" type="video/mp4" />
              </video>
            </div>
          </div>

          <!-- Area 120 -->
          <div class="content phone google" data-priority="1.1">
            <div class="content-caption">
              <div class="title">
                <a
                  href="https://techcrunch.com/2019/07/11/new-google-area-120-project-shoelace-aims-to-connect-people-around-shared-interests/"
                  >Shoelace</a
                >
                (2019)
              </div>
              <div>Design, Google</div>
            </div>
            <div class="content-main"><img draggable="false" src="/Images/home/shoelace.png" /></div>
          </div>
          <div class="content phone google" data-priority="1.5">
            <div class="content-caption">
              <div class="title"><a href="http://www.gamesnacks.com" target="_blank">Gamesnacks</a> (2019)</div>
              <div>Design, Google</div>
            </div>
            <div class="content-main"><img draggable="false" src="/Images/home/live-game-show.png" /></div>
          </div>
          <!-- Expression  -->
          <div class="content phone google" data-priority="1.5">
            <div class="content-caption">
              <div class="title">
                <a href="https://mashable.com/article/google-gboard-mini-stickers-how-to/" target="_blank"> Minis </a>
                (2018/19)
              </div>
              <div>Product Mgmt, Google</div>
            </div>
            <div class="content-main">
              <video width="1080" height="1920" muted loop poster="/Images/home/minis-create-flow-static.png">
                <source src="/Images/home/minis-create-flow.mp4" type="video/mp4" />
              </video>
            </div>
          </div>
          <div class="content phone google" data-priority="1.5">
            <div class="content-caption">
              <div class="title">Make a gif (2018/19)</div>
              <div>Product Mgmt, Google</div>
            </div>
            <div class="content-main">
              <video width="1080" height="1920" muted loop poster="/Images/home/excam.png">
                <source src="/Images/home/excam.mp4" type="video/mp4" />
              </video>
            </div>
          </div>
          <!-- Drawings -->
          <div class="content paper" data-priority="1.5">
            <div class="content-caption">
              <div class="title"><a href="http://www.instagram.com/by_bvk" target="_blank">drawing!</a> (1992-present)</div>
            </div>
            <div class="content-main"><img draggable="false" src="/Images/home/bike-sketch.jpeg" /></div>
          </div>
          <div class="content paper" data-priority="1">
            <div class="content-caption">
              <div class="title"><a href="http://www.instagram.com/by_bvk" target="_blank">drawing in 3d!</a> (2016-present)</div>
            </div>
            <div class="content-main"><img draggable="false" src="/Images/home/businessmen.jpg" /></div>
          </div>
        </div>
      </div>

 
    <script>
      displayProgress(" JS is starting");

      var contentHolder = document.getElementById("content-holder");
      var contentPieces = contentHolder.children;
      var windowSizeFactor = 0.31; //Controls how large the largest piece of content will be

      var workShown = false;
    

      function setup() {
        if (workShown) {
          setUpWindowSizeCalc();
          //Set up the right event listenere
          if (isDesktop() && !canvas) {
            createCanvas();
            window.addEventListener("resize", () => setCanvasSize());
            window.addEventListener("resize", () => setup());
          }
          //Pass 1: First resize all the content, and make it draggable
          for (var i = 0; i < contentPieces.length; i++) {
            var content = contentPieces[i];
            if (content.id == "play") {
              continue;
            }
            resizeContent(content);
            makeDraggable(content);
          }
          //Pass 2: layout all the content
          layoutContent();

          //Pass 3: Setup all the video hovers
          setupVideoHover();
        }

        randomizeColors();
      }
      function showWork() {
        console.log("Show work was called")
        let workDiv = document.getElementById("container");
        workDiv.className = "visible";
        workShown = true;
        let workButton = document.getElementById("layout-refresh");
        workButton.style.display = "";
        setup();
      }
      function refreshPage() {
        layoutContent();
        randomizeColors();
      }
      function randomizeColors() {
        updateColorHue("FGColor", Math.floor(Math.random() * 180), true);
        updateColorHue("BGColor", Math.floor(Math.random() * 180) + 180, true);
        updateColorHue("BrushColor", Math.floor(Math.random() * 360), true);
      }

      //ðŸ–¼ðŸ–¼ðŸ–¼ðŸ–¼ CONTENT LAYOUT RELATED FUNCTIONS

      //Makes content draggable.
      //TODO: Maybe consider making this only for a certin area.
      let offsetX = 0,
        offsetY = 0;

      function makeDraggable(content) {
        let mouseDown = false;
        content.addEventListener("mousedown", (e) => {
          mouseDown = true;
          offsetX = e.pageX - parseInt(content.offsetLeft);
          offsetY = e.pageY - parseInt(content.offsetTop);
        });

        document.addEventListener("mouseup", () => {
          mouseDown = false;
          offsetX = 0;
          offsetY = 0;
        });

        document.addEventListener("mousemove", (e) => {
          if (mouseDown) {
            let leftPos = e.pageX - offsetX;
            let topPos = e.pageY - offsetY;
            content.style.left = leftPos + "px";
            content.style.top = topPos + "px";
            displayProgress("Moving the content", [e, content, leftPos, topPos]);
          }
        });
      }

      //Gets the image for the content
      //TODO: Make this not jank
      function getImageForContent(content) {
        var contentMain = content.children[1];
        if (!contentMain) return null;
        var contentImg = contentMain.children[0];
        return contentImg;
      }

      //Resize every piece of content.
      function resizeContent(content) {
        //First figure out if it has an image
        var contentImage = getImageForContent(content);
        if (!contentImage) return;
        //Get the priority of the image, default to 1
        var priority = content.dataset.priority;
        if (!priority) priority = 1;
        //Set the major/minor axis according to the aspect ratio of the image
        var sizeFactor = windowSizeFactor / priority;
        var majorAxisLength, windowMajorAxis;

        var contentWidth = contentImage.width;
        var contentHeight = contentImage.height;

        if (contentWidth == 0 || contentHeight == 0) {
          contentWidth = contentImage.clientWidth;
          contentHeight = contentImage.clientHeight;
        }
        var aspect = contentWidth / contentHeight;

        var objectToResize = contentImage;

        if (contentWidth > contentHeight) {
          majorAxisLength = sizeFactor * getWindowSize().width;
          contentImage.style.width = majorAxisLength + "px";
          contentImage.style.height = "auto";

          if (contentImage.tagName == "VIDEO") {
            content.style.width = majorAxisLength + "px";
            content.style.height = majorAxisLength / aspect + "px";
          }
        } else {
          majorAxisLength = sizeFactor * getWindowSize().height;
          contentImage.style.height = majorAxisLength + "px";
          contentImage.style.width = "auto";

          if (contentImage.tagName == "VIDEO") {
            content.style.height = majorAxisLength + "px";
            content.style.width = majorAxisLength * aspect + "px";
          }
        }
        // content.style.width = contentImage.clientWidth + "px";
        // content.style.height = contentImage.clientHeight + "px";
        displayProgress("Resizing /content to " + majorAxisLength, [contentImage]);
      }

      //Controller for layout
      function layoutContent() {
        //Arrange content as per constraints
        if (!isDesktop() || getWindowSize().width < 850) {
          displayProgress("Entering mobile mode");
          arrangeVertically();
        } else {
          var areaSize = [contentHolder.clientWidth, contentHolder.clientHeight];
          var distanceBetweenContent = 0.4 * areaSize[1];
          var areaForContent = [0.8 * areaSize[0], 2 * areaSize[1]];
          arrangePoisson(areaForContent, distanceBetweenContent);
        }
        //Then like go ahead and do some basic edge detection cuz why not
        for (var i = 0; i < contentPieces.length; i++) {
          var content = contentPieces[i];
          borderDetection(content);
        }
      }

      //Arrange vertically
      function arrangeVertically() {
        var paddingBetweenContent = 24;
        var currentTop = document.getElementById("header").getBoundingClientRect().bottom + paddingBetweenContent;

        for (var i = 0; i < contentPieces.length; i++) {
          var content = contentPieces[i];

          var contentTop = currentTop + Math.floor(Math.random() * 12);
          var spaceLeft = 0.5 * (getWindowSize().width - content.offsetWidth);
          var contentLeft = Math.floor(Math.random() * spaceLeft);

          displayProgress("Placing content at t " + contentTop + "  l " + contentLeft);

          content.style.top = contentTop + "px";
          content.style.left = contentLeft + "px";
          currentTop = contentTop + content.offsetHeight + paddingBetweenContent;
        }
      }

      //Poisson arrangement
      function arrangePoisson(poissonSize, distanceBetweenContent) {
        var sampler = poissonDiscSampler(poissonSize[0], poissonSize[1], distanceBetweenContent);

        for (var i = 0; i < contentPieces.length; i++) {
          var sample = sampler();
          if (!sample) {
            arrangePoisson(poissonSize, distanceBetweenContent - 10);
            return;
          }
          var content = contentPieces[i];
          //Left right edge detection and move
          var leftPos = sample[0],
            topPos = sample[1];

          var headerBottom = document.getElementById("header").getBoundingClientRect().bottom + 12;
          topPos = Math.max(topPos, headerBottom);
          //Set position
          content.style.left = leftPos + "px";
          content.style.top = topPos + "px";
        }
        displayProgress(
          "Sampler completed with distance " +
            distanceBetweenContent +
            " w: " +
            poissonSize[0] +
            " h: " +
            poissonSize[1]
        );
      }

      //Border detection and movement
      function borderDetection(content) {
        var rightEdge = content.getBoundingClientRect().right;
        if (rightEdge > getWindowSize().width) {
          var offset = getWindowSize().width - rightEdge;
          displayProgress("Woah! Moving content because it fell off right edge", [content, offset]);
          var newLeftPos = content.getBoundingClientRect().left + (offset - 16);
          content.style.left = newLeftPos + "px";
        }
      }

      function setUpWindowSizeCalc() {
        let vh = window.innerHeight * 0.01;
        document.documentElement.style.setProperty("--vh", `${vh}px`);
        let vw = window.innerWidth * 0.01;
        document.documentElement.style.setProperty("--vw", `${vw}px`);
      }

      // ðŸš¦ USER DRIVEN UPDATES

      function setupVideoHover() {
        var videoElements = document.getElementsByTagName("video");
        for (var i = 0; i < videoElements.length; i++) {
          let videoElement = videoElements[i];
          let contentMain = videoElement.parentElement;
          let containerElement = contentMain.parentElement;
          containerElement.addEventListener("mouseover", () => {
            onVideoElHover(videoElement);
          });
          containerElement.addEventListener("mouseout", () => {
            onVideoElLeave(videoElement);
          });
        }

        function onVideoElHover(videoEl) {
          var promise = videoEl.play();
          if (promise !== undefined) {
            promise
              .then(function () {
                console.log("Whatever");
              })
              .catch(function (error) {
                console.log("The video isnt going to play on hover");
              });
          }
        }

        function onVideoElLeave(videoEl) {
          videoEl.pause();
        }
      }

      function setCaptionColor() {
        var bgColorHSL = getComputedStyle(document.documentElement).getPropertyValue("--BGColor");

        var bgFrontPart = bgColorHSL.split(",")[0] + "," + bgColorHSL.split(",")[1];
        var bgLightnessStr = bgColorHSL.split(",")[2].split(")")[0].split("%")[0].trim();
        var bgLightness = parseInt(bgLightnessStr);

        var newLightness = 95;
        var newHSL = `${bgFrontPart},${newLightness}%)`;

        document.documentElement.style.setProperty("--CaptionColor", newHSL);
      }

      var saturation = 100;
      var lightness = 50;

      function updateColorHue(color, newHue, isForced) {
        let newHSL;

        if (color.includes("BG")) {
          newHSL = `hsl( ${newHue}, 25%, 85%)`;
        } else if (color.includes("FG")) {
          newHSL = `hsl( ${newHue}, 50%, 90%)`;
        } else if (color.includes("Brush")) {
          newHSL = `hsl( ${newHue}, 30%, 40%)`;
        }
        var colorVaraible = "--" + color;
        document.documentElement.style.setProperty(colorVaraible, newHSL);

        if (color == "BrushColor" && isDesktop()) {
          setCanvasBrushColor();
        }

        if (color == "BGColor") {
          setCaptionColor();
        }
        if (isForced) {
          document.getElementById(color + "-range").value = newHue;
        }
        setFaviconFromCanvas();
      }

      // ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ CANVAS!

      var canvas, isOver;
      var group = [];
      function createCanvas() {
        canvas = new fabric.Canvas("draw-canvas", {
          isDrawingMode: true,
          hoverCursor: "pointer",
        });
        setCanvasSize();
        setCanvasBrushColor();
      }

      function setCanvasBrushColor() {
        //var color = getComputedStyle(document.documentElement).getPropertyValue("--BrushColor"); // #999999
        //canvas.freeDrawingBrush.color = color;
      }

      function setCanvasSize() {
        canvas.setHeight(window.innerHeight);
        canvas.setWidth(window.innerWidth);
      }

      function loadSquiggle() {
        let svgStrings = [
          `<svg width="275.8px" height="76.9px"> 
              <path style="stroke:--var(BrushColor);stroke-width:1; fill:none" d="M4.6,76.7C-4.8,61,2.9,38.6,18.7,29.6s37-5.6,51.4,5.6c3.9,3,7.5,6.7,9,11.4s0.5,10.5-3.5,13.3
            c-4,2.9-9.9,2-13.9-0.9c-4-2.9-6.5-7.5-8.4-12c-5.3-12.6-5.7-29.8,5.7-37.4c5.8-3.9,13.2-4.2,20.2-3.8c17.3,0.9,34.3,5.1,50.1,12.2
            c8.9,4.1,18.3,10.3,19.9,20c0.3,1.8,0.2,3.8-0.9,5.1c-2.1,2.5-6.1,1.6-9.1,0.4c-6.1-2.3-12.4-4.7-17.3-9.1s-8.1-11.2-6.4-17.5
            c2.2-7.8,10.7-11.9,18.5-13.9c16.1-4,33.3-3.4,49,2c5.5,1.9,11.2,4.6,14.3,9.5s2.5,12.6-2.6,15.5c-6.2,3.5-14.5-3.2-14.4-10.3
            s6.1-13,12.7-15.7c13.3-5.4,28.3-0.9,41.8,3.8c6.2,2.2,13.1,5.1,15.4,11.2c2.3,6.2-5,14.5-10.2,10.4c-3.6-2.8-2.7-8.5-0.3-12.3
            c7.2-11.5,22.3-14.6,35.7-16.5"/> </svg>`,
          `<svg width="294px" height="52.7px">
              <path  style="stroke:--var(BrushColor);stroke-width:1; fill:none"  d="M0.5,30C4.1,43.3,18.6,50.8,32.2,52c11.8,1,24.5-1.9,32.6-10.5s9.6-23.7,1.3-32.1c-0.6-0.6-1.3-1.2-2.2-1.4
                c-1.4-0.4-2.8,0.4-3.9,1.3c-6.4,5.4-4,16.5,2.5,21.7s15.3,6.2,23.6,7c7.3,0.7,15.3,1.2,21.3-3c3.4-2.4,5.8-6,7.6-9.8
                c3.6-7.5,5.4-16,5.1-24.3c-7.3-1.9-13,8.2-9.9,15.1c3,6.9,10.8,10.2,18.1,11.9c11.8,2.8,24.1,3,35.9,0.6c6.3-1.2,12.8-3.5,16.5-8.7
                s2.4-14-3.6-16.1c-6.4,1.2-8,10.5-4,15.7c4,5.1,10.9,6.7,17.3,7.5c7.9,0.9,15.8,1.1,23.7,0.4c6.1-0.5,12.4-1.6,17.2-5.5
                s7.1-11.2,3.7-16.2c-6.4,0.4-8.5,9.8-4.7,14.8c3.9,5.1,10.7,6.6,17,7.7c6.9,1.1,13.8,2.1,20.7,1.9c5.3-0.2,10.7-1.1,15-4.2
                c4.3-3.1,6.9-8.9,5.1-13.8c-9.3-0.8-17.9,8.7-16.2,17.9c1.7,9.1,13.3,14.9,21.6,10.8"/>
              </svg>`,
        ];

        let svgString = svgStrings[Math.floor(Math.random() * svgStrings.length)];

        fabric.loadSVGFromString(
          svgString,
          function (objects, options) {
            var loadedObjects = new fabric.Group(group);
            loadedObjects.set({
              left: Math.random() * window.innerWidth,
              top: 0.2 + Math.random() * window.innerHeight,
              width: Math.random() * (0.4 * window.innerWidth),
            });
            canvas.add(loadedObjects);
            canvas.renderAll();
          },
          function (item, object) {
            object.set("id", item.getAttribute("id"));
            group.push(object);
          }
        );
      } 
      setTimeout(showWork(), 1000)
      //setTimeout(setup(), 300);

      /// FAVICON

      function setFaviconFromCanvas() {
        var favCanvas = document.createElement("canvas");
        favCanvas.width = 16;
        favCanvas.height = 16;
        var ctx = favCanvas.getContext("2d");

        var bgColorHSL = getComputedStyle(document.documentElement).getPropertyValue("--BGColor");
        var fgColorHSL = getComputedStyle(document.documentElement).getPropertyValue("--FGColor");
        var brushColorHSL = getComputedStyle(document.documentElement).getPropertyValue("--BrushColor");

        ctx.fillStyle = bgColorHSL;
        ctx.fillRect(0, 0, 16, 16);

        ctx.fillStyle = fgColorHSL;
        ctx.beginPath();
        ctx.arc(8, 8, 4, 0, 2 * Math.PI);
        ctx.fill();

        ctx.fillStyle = brushColorHSL;
        ctx.beginPath();
        ctx.arc(8, 8, 1, 0, 2 * Math.PI);
        ctx.fill();

        var link = document.createElement("link");
        link.type = "image/x-icon";
        link.rel = "shortcut icon";
        link.href = favCanvas.toDataURL("image/x-icon");
        document.getElementsByTagName("head")[0].appendChild(link);
      }
    </script>
  </body>
</html>
